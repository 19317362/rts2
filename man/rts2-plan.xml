<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
"http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
	
  <!ENTITY dhfirstname "<firstname>Petr</firstname>">
  <!ENTITY dhsurname   "<surname>Kubanek</surname>">
  <!ENTITY dhdate      "<date>2011-01-24</date>">
  <!ENTITY dhsection   "<manvolnum>1</manvolnum>">
  <!ENTITY dhemail     "<email>petr@kubanek.net</email>">
  <!ENTITY dhusername  "Petr Kubanek">
  <!ENTITY command     "rts2-plan">

  <!ENTITY % rts2 SYSTEM "rts2.ent">
  %rts2;
]>

<refentry>
  <refentryinfo>
    <title>&command;</title>
    <productname>rts2</productname>
    <productnumber>0.8.2</productnumber>
    &dhdate;
    <authorgroup>
      <author>
        &dhfirstname;
        &dhsurname;
	<contrib>Wrote this manual page.</contrib>
	<address>
          &dhemail;
	</address>
      </author>
    </authorgroup>
    <copyright>
      <year>2005-2010</year>
      <holder>&dhusername;</holder>
    </copyright>
    <copyright>
      <year>2011</year>
      <holder>&fzu;</holder>
    </copyright>
    &legal;
  </refentryinfo>
  <refmeta>
    <refentrytitle>&command;</refentrytitle>
    &dhsection;
  </refmeta>
  <refnamediv>
    <refname>&command;</refname>
    <refpurpose>Manage fixed-time observation scheduling.</refpurpose>
  </refnamediv>
  <refsynopsisdiv>
    <cmdsynopsis>
      <command>&command;</command>
      &dbapponly;
      <arg choice='plain'>
        <arg><option>--add</option>
	  <arg choice='req' rep='repeat'><replaceable class="parameter">target name or ID</replaceable> <replaceable class="parameter">start time</replaceable> <arg><replaceable class="parameter">end time</replaceable></arg></arg>
	</arg>
	<arg>
          <option>--dump</option>
          <arg><option>-n</option> <replaceable class="parameter">YYYY-MM-DD</replaceable></arg>
	</arg>  
        <arg><option>--load</option></arg>
        <arg><option>--generate</option></arg>
      </arg>
      <arg choice='plain'>	
        <arg><option>--target</option> <arg choice='req' rep='repeat'><replaceable class='parameter'>target id or name</replaceable></arg></arg>
      </arg>
      <arg choice='plain'>	
        <arg><option>--copy</option> 
          <arg choice='req'><option>-n</option> <replaceable class="parameter">YYYY-MM-DD</replaceable></arg>
          <arg choice='req' rep='repeat'><replaceable class="parameter">YYYY-MM-DD</replaceable></arg>
        </arg>
      </arg>
      <arg choice='plain'>	
        <arg><option>--delete</option> <arg choice='req' rep='repeat'><replaceable class="parameter">plan ID</replaceable></arg></arg>
      </arg>	
    </cmdsynopsis>
    <cmdsynopsis>
      <command>&command;</command>
      &basicapp;
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsect1 id="description">
    <title>DESCRIPTION</title>

    <para>
      With <command>&command;</command> users can manipulate target scheduling.
      New plan entries can be added, existing plan entries can be listed and
      deleted. Plan entries for a given target can be listed.
    </para>

  </refsect1>
  <refsect1 id="options">
    <title>OPTIONS</title>

    &optiongnu;

    <variablelist>
      <varlistentry>
        <term><option>--add</option> <arg rep='repeat' choice='req'><replaceable class="parameter">target name or ID</replaceable> <replaceable class="parameter">start time</replaceable> <arg><replaceable class="parameter">end time</replaceable></arg></arg></term>
        <listitem>
          <para>
	    Add new fixed schedule target. The end time is optional.
	  </para>
	  <para>  
	    If <replaceable class="parameter">start time</replaceable> or
	    <replaceable class="parameter">end time</replaceable> parameters
	    are numbers preceeded wih <emphasis>+</emphasis> sign, they are
	    interpreted as time offsets. Base time is time current system time
	    for start time parameter, and start time value for end time. Please
            see <link linkend='examples'>examples</link> for details.
	  </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--dump</option></term>
	<listitem>
	  <para>
	    Dump plan entries. Unless night is specified with
	    <option>-n</option> option, the current night plan entries are
	    printed on standard output.
	  </para>
	</listitem>
      </varlistentry>	    
      <varlistentry>
	<term><option>-n <replaceable class='parameter'>YYYY-MM-DD</replaceable></option></term>
	<listitem>
	  <para>
	    Specify night for which targets will be dumped.
	  </para>
	</listitem>  
      </varlistentry>
      <varlistentry>
        <term><option>--load</option></term>
	<listitem>
	  <para>
            Load plan from standard input. Plan entries are separated by new line, and have the following format:
	  </para>
	</listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--copy</option>
          <arg><option>-n</option> <replaceable class="parameter">YYYY-MM-DD</replaceable></arg>
	  <arg rep='repeat' choice='req'><replaceable class='parameter'>YYYY-MM-DD</replaceable></arg>
	</term>
	<listitem>
	  <para>
	     Copy plan from a single night to other night(s). The plan entries
	     from plan for night specified with <option>-n</option> are copied 
	     to nights specified as arguments. The plan start and possibly (if
	     filled) end dates are offseted with difference between nights.
	  </para>  
	</listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--target</option> <arg rep='repeat' choice='req'><replaceable class='parameter'>target name or id</replaceable></arg></term>
	<listitem>
	  <para>
	    Print plan entries for given target(s).
	  </para>  
	</listitem>
      </varlistentry>
      <varlistentry>
         <term><option>--delete</option> <arg rep='repeat' choice='req'><replaceable class='parameter'>plan id</replaceable></arg></term>
	 <listitem>
	   <para>
	     Delete plan entry with given plan IDs.
	   </para>
	 </listitem>  
      </varlistentry>
      &dbapplist;	
    </variablelist>  
  </refsect1>
  <refsect1 xml:id='examples'>
    <title>Examples</title>

    <para>
      Following example add new plan entry for target with name M31, to be
      executed on 2013-03-13, at 12:34:41 UT. The target will be valid for 5
      minutes (300 seconds).
    </para>

    <screen>
      <command>&command;</command> <option>--add</option> <replaceable>M31</replaceable> <replaceable>2013-03-13T12:34:41</replaceable> <replaceable>+300</replaceable>
    </screen>

    <para>
      Following examples schedules target with name M81 to be executed in one
      hour (=3600 seconds) from now, and running until it is above horizon (as
      end time is not specified):
    </para>

    <screen>
      <command>&command;</command> <option>--add</option> <replaceable>M81</replaceable> <replaceable>+3600</replaceable>
    </screen>  

    <para>
      To print plan for the current night, execute following:
    </para>

    <screen>
      <command>&command;</command> <option>--dump</option>
    </screen>

    <para>
      To print plan for night 2013-03-13, execute:
    </para>

    <screen>
      <command>&command;</command> <option>--dump</option> <option>-n</option> <replaceable>2013-03-13</replaceable>
    </screen>

    <para>
      To print all plan entries for target with name M81:
    </para>
    
    <screen>
      <command>&command;</command> <option>--target</option> <replaceable>M81</replaceable>
    </screen>

    <para>
      To copy targets from night 2013-03-13 to nights of 2013-04-15 and 2013-04-16, use the following command:
    </para>
    
    <screen>
      <command>&command;</command> <option>-n</option> <replaceable>2013-03-13</replaceable> <option>--copy</option> <replaceable>2013-04-15</replaceable> <replaceable>2013-04-16</replaceable>
    </screen>  

     
  </refsect1>  
  <refsect1>
    <title>SEE ALSO</title>

    <para>
      <citerefentry>
        <refentrytitle>rts2</refentrytitle>
	<manvolnum>7</manvolnum>
      </citerefentry>
    </para>

  </refsect1>
</refentry>
