<?xml version='1.0' encoding='ISO-8859-1'?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
"http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [

  <!ENTITY dhfirstname "<firstname>Petr</firstname>">
  <!ENTITY dhsurname   "<surname>Kubánek</surname>">
  <!ENTITY dhdate      "<date>2007-03-17</date>">
  <!ENTITY dhsection   "<manvolnum>5</manvolnum>">
  <!ENTITY dhemail     "<email>petr@kubanek.net</email>">
  <!ENTITY dhusername  "Petr Kubánek">
  <!ENTITY dhucpackage "<refentrytitle>rts2</refentrytitle>">
  <!ENTITY dhpackage   "rts2.script">

  <!ENTITY debian      "<productname>Debian</productname>">
  <!ENTITY gnu         "<acronym>GNU</acronym>">
  <!ENTITY gpl         "&gnu; <acronym>GPL</acronym>">
]>

<refentry>
  <refentryinfo>
    <address>
      &dhemail;
    </address>
    <author>
      &dhfirstname;
      &dhsurname;
    </author>
    <copyright>
      <year>2006</year>
      <holder>&dhusername;</holder>
    </copyright>
    &dhdate;
  </refentryinfo>
  <refmeta>
    &dhucpackage;

    &dhsection;
  </refmeta>
  <refnamediv>
    <refname>&dhpackage;</refname>

    <refpurpose>Scripting for Remote Telescope System, 2nd Version</refpurpose>
  </refnamediv>
  <refsect1>
    <title>SYNOPSIS</title>

    <para>
      Scripting is used to command variours devices which can be found in RTS2 setup.
    </para>

    <para>
      Script can contains block, enclosed in curved brackets ({}).
      Those block ussually cames after for, if and similar commands.
    </para>

  </refsect1>
  <refsect1>
    <title>COMMANDS</title>

    <para>
      Commands are separated by arbitary number of spaces.  As
      notation, parameters are in following description enclosed in
      {curved brackets}, explanation of their meaning is given in
      text.  Numerical values are entered in standard decimal
      notation.
    </para>

    <variablelist>
      <varlistentry>
        <term>
	  <option>E {exposure_time}</option>
	</term>
	<listitem>
	  <para>
	    Takes light exposure. Exposure time is specified
	    in seconds.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>D {exposure_time}</option>
	</term>
	<listitem>
	  <para>
	    Takes dark frame, usefull for callibration. Exposure time is specified
	    in seconds.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>F {filter_number}</option>
	</term>
	<listitem>
	  <para>
	    Changes filter on camera filter wheel. Filter numbers are
	    always counted from 0.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>O {unknow}</option>
	</term>
	<listitem>
	  <para>
	    Reserved for focusing command. Not implemented yet.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>C {ra_diff} {dec_diff}</option>
	</term>
	<listitem>
	  <para>
	    Change mount position before next exposure by {ra_diff}
	    and {dec_diff}. Wait for time when no exposure are
	    running, then perform move, then continue exposing.
	  </para>
	  <para>
	    {ra_diff} and {dec_diff} are in arcdegrees.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>hex {ra_diff} {dec_diff} [block]</option>
	</term>
	<listitem>
	  <para>
	    Change mount position in hex pattern after finishing
	    [block] and execute [block] again. This will produce
	    images which are aligned on hexagonal path.
	  </para>
	  <para>
	    {ra_diff} and {dec_diff} are in arcdegrees.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>fxf {ra_diff} {dec_diff} [block]</option>
	</term>
	<listitem>
	  <para>
	    Change mount position in 5x5 rectangular pattern after finishing
	    [block] and execute [block] again. This will produce images which
	    are aligned on rectangular path.
	  </para>
	  <para>
	    {ra_diff} and {dec_diff} are in arcdegrees.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>BIN {binning} </option>
	</term>
	<listitem>
	  <para>
	    Change both vertical and horizontal binning. Will be
	    dropped in favour of constant settings.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>BOX {x} {y} {width} {heigh} </option>
	</term>
	<listitem>
	  <para>
	    Readout area of chip, specified by pixel coordinates of
	    upper left cornen (x and y) and width and heigh.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>CENTER {width} {heigh} </option>
	</term>
	<listitem>
	  <para>
	    Readout center of chip of provided width and heigh (in
	    pixels).
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>W</option>
	</term>
	<listitem>
	  <para>
	    Generic wait for any signal.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>A {precision} {exposure_time}</option>
	</term>
	<listitem>
	  <para>
	    Take image of {exposure_time}, try astrometry, wait for
	    result. If image is not within {precision} degrees from
	    target position, repeat it. It can take more images, as
	    long as precission of last image is at least twice better
	    then previous image - e.g. if o1 is offset of last image,
	    and o0 is offset of previous one, o1 &lt; o2 / 2.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>Aw</option>
	</term>
	<listitem>
	  <para>
	    Wait for finish of A command on other camera. If there
	    isn't any script with A command for any device, it will
	    pass to next command.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>M {mirror_position}</option>
	</term>
	<listitem>
	  <para>
	    Move mirror to new position, specified by
	    {mirror_position} numeric argument.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>P {filter} {exposure} {count}</option>
	</term>
	<listitem>
	  <para>
	    Do measurements on photometer. Filter is filter number
	    (integer), exposure is exposure time in seconds (float
	    number), and count is integer specifing how many
	    measurements will be taken.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>star {repeat_number} {precision} {exposure} {min_flux}</option>
	</term>
	<listitem>
	  <para>
	    Try to find on image stars with (raw) flux large than
	    {min_flux}. Exposure lenght and required precision from
	    star center can be specified. {repeat_number} specified
	    how many time will be search performed. If star brighter
	    then {min_flux} is not found on taken image, telescope is
	    shift on spherical path in order to find a bright star.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>PS {radius} {speed}</option>
	</term>
	<listitem>
	  <para>
	    Do cross search of maxima on photometer. Radius specify
	    radius in degrees, which will be searched, and speed
	    specified speed which will be used.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>block_waitsig {signal}</option>
	</term>
	<listitem>
	  <para>
	    Execute next block only if given signal arrives.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>guiding {exposure_time} {end_signal}</option>
	</term>
	<listitem>
	  <para>
	    Start guiding on given camera. Exposure of {exposure_time}
	    lenght are taken, brightest stars on them is founded, and
	    correction commands are then feed to telescope. When
	    {end_signal} is sended (using SS command), guiding loop is
	    stoped.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>ifacq [block] [else [block]]</option>
	</term>
	<listitem>
	  <para>
	    Start given commands only if acquistion of target ended
	    sucessfully.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>for {repeat_number} [block]</option>
	</term>
	<listitem>
	  <para>
	    Execute commands in block for {repeat_number} times.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>HAM {repeat_number} {exposure_time}</option>
	</term>
	<listitem>
	  <para>
	    Search for HAM source. It is similar as searching for
	    stars, but terrestial movement commands are used.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>SS {signal}</option>
	</term>
	<listitem>
	  <para>
	    Send given signal. Other scripts can wait for signal with
	    SW command. Signal is integer number, which should be
	    unique in script.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>SW {signal}</option>
	</term>
	<listitem>
	  <para>
	    Wait for signal. Execution of script is paused until
	    signal with given number is send.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>tardisable</option>
	</term>
	<listitem>
	  <para>
	    Disable target. In consectutive selector runs, it will not
	    be considered for selection. Target can be re-enabled by
	    rts2-target (1) command executed with -e option.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>tempdisable {seconds}</option>
	</term>
	<listitem>
	  <para>
	    Temporaly disable target for {seconds}. If next selector
	    run hapened earlier then {seconds} time from now, target
	    will not be considered. Target temporary disable is
	    stored in NEXT_OBSERVABLE target parameter, which can be
	    reseted by rts2-target (1) command executed with -o option.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>
	  <option>tarboost {seconds} {bonus}</option>
	</term>
	<listitem>
	  <para>
	    Temporaly boost target for {seconds}. It changes value of
	    TARGET BONUS and TARGET BONUS TIME fields. Those fields
	    can be changed by rts2-target (1) command executed with -b
	    and -t options.
	  </para>
	</listitem>
      </varlistentry>

    </variablelist>
  </refsect1>
  <refsect1>
    <title>EXAMPLES</title>

    <para>focpos-=50 for 10 { E 10 focpos+=10 }</para>

  </refsect1>
  <refsect1>
    <title>SEE ALSO</title>

    <para>rts2 (1), rts2-target (1).</para>

  </refsect1>
  <refsect1>
    <title>COPYRIGHT</title>

    <para>This manual page was written by &dhusername; &dhemail;.
      Permission is granted to copy, distribute and/or modify this 
      document under the terms of the &gnu; General Public License, 
      Version 2 any later version published by the Free Software Foundation.
    </para>

  </refsect1>
</refentry>
