
all: grbc

ibas/ibas.a:
	$(MAKE) -C ibas

bacodine/bacodine.a:
	$(MAKE) -C bacodine

grbc: grbc.o ../db/db.o ../utils/devcli.a ../writers/fits.o ibas/ibas.a bacodine/bacodine.a
	$(CC) -o $@ $^ $(CFLAGS) $(LDFLAGS)

%.c: %.ec
	@ECPG@ -o $@ $^

CFLAGS += @LIBPG_CFLAGS@ -Iibas -I@top_srcdir@/include
LDFLAGS += @LIBS@

clean:
	$(RM) *.o
	$(MAKE) -C bacodine clean
	$(MAKE) -C ibas clean
