all: pg_wcs.so pg_astrolib.so

install:
	@INSTALL@ pg_wcs.so @PG_CONFIG_SERVER_LIBS@
	@INSTALL@ -c pg_astrolib.so @PG_CONFIG_SERVER_LIBS@

pg_wcs.o: pg_wcs.c
	$(CC) -Wall -Wshadow -fpic -c -o $@ $^ @LIBPG_SERVER_CFLAGS@

pg_wcs.so: pg_wcs.o
	$(CC) -Wall -Wshadow -shared -o $@ $^ @LIB_WCS@ 

pg_astrolib.o: pg_astrolib.c
	$(CC) -Wall -Wshadow -fpic -c -o $@ $^ @LIBPG_SERVER_CFLAGS@

pg_astrolib.so: pg_astrolib.o
	$(CC) -Wall -Wshadow -shared -o $@ $^ -lnova

clean:
	$(RM) *.o *.so core*
