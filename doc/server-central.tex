\section{Agenty}

Jak je uvedeno v popisu CCD kamery, pøi vyèítání dochází ke znaènému zatí¾ení
poèítaèe øídícího vyèítáni. Je tedy vhodné mít minimálnì dvì, navzájem spojená
zaøízení, z nich¾ jedno øídí vyèítání z kamery a druhé se stará o zpracování
snímkù.

Systém vychází z teorie agentù. Nad spoleèným komunikaèním rozhraním bì¾í malé
jednoúèelové procesy-agenty\footnote{agenty jsou pova¾ovány za ne¾ivotné,
proto¾e se jedná o zaøízení} s, které vykonávají svoji specifickou èinnost, a
komunikují s ostatními agenty.

Struktura agentù odpovídá zaøízením a procesùm pøítomných u dalekohledu.
Je mo¾né uva¾ovat o následujících typech agentù:

\begin{itemize}

\item agent pro ovládání kamery

\item agent pro ovládání montá¾e

\item agent pro ovládání støechy a meteorologické stanice

\item agent pro øízení pozorování

\end{itemize}

Agenty pro øízení pozorování budou v dal¹ím textu oznaèovány jako {\bf
klienti}. Je vhodné je rozdìlit na agenty pro:

\begin{itemize}

\item dlouhodobé pozorování

\item rychlé pozorování GRB

\item monitoring a správu systému

\end{itemize}

Jako {\bf zaøízení} budeme oznaèovat agenty ovládající zaøízení, tedy agenty 
pro kameru, montá¾ a støechu. 

Klienti mohou migrovat z jednoho poèítaèe na druhý, zaøízení migrovat nemohou.
V návrhu se pro jednoduchost s migrací nepoèítá.

\section{Centrální server}

Existují funkce systému, které je rozumné spravovat centrálnì. Jedná se v¾dy
o~funkce, které by se na v¹ech zaøízeních chovají stejnì. Jako vhodný pøíklad
mù¾e poslou¾it autentifikace - pøi pou¾ití veøejného u¾ivatelského jména
a~tajného hesla je vhodné zajistit, aby klientovi staèilo jedno u¾ivatelské
jméno a jedno heslo. Dal¹ím pøíkladem mù¾e být seznam zaøízení obsa¾ených v
systému. Tyto funkce jsou dále oznaèovány jako {\bf centrální funkce}.

Funkce, které je potøeba volat na jednotlivých zaøízeních, jsou oznaèovány jako
{\bf lokální funkce}.

Centrální funkce jsou provádìny agentem - {\bf centrálním serverem}.
Pro provádìní lokálních funkcí je pou¾ito pøímé spojení mezi agentem a
zaøízením.

\subsection{Pøíklad}

Na diagramu \ref{fig:overview} je zobrazena konfigurace systému BART.

\dia{overview}{Pøehled agentù - BART}

Na montá¾i LX200, vyrábìné firmou Meade, jsou pøichyceny dvì CCD kamery SBIG
typu ST8, vybavené ¹irokoúhlou optikou. Na hlavním dalekohledu je pak umístnìna
kamera ST9. Posuvná støecha dalekohledu je ovládána ruènì.

Systém se skládá z poèítaèe se jménem lascaux, na kterém bì¾í databázový
server, centrální server, v¹echny agenty, které øídí pozorování (pro pøíjem
zpráv o gamma záblescích, pro dlouhodobá pozorování), a monitoring.

Dále systém obsahuje tøi poèítaèe pro obsluhu kamer, k jednomu z nich je
souèasnì pøipojena montá¾. Jejich jména jsou volena podle typu kamer - c0, c1
pro ¹irokoúhlé kamery a cnf1 pro kameru umístnìnou v ohnisku dalekohledu.

BACODINE a IBAN jsou systémy pro zasílání zpráv o gama záblesku.

Do systému se mù¾e pøipojit monitorovací klient z libovolného místa na
Internetu\footnote{vnitøní sí», spojující lascaux s poèítaèi pro
ovládání kamer, je nedostupná zvenèí - je chránìna pøed pøípadnými útoky z
Internetu pomocí pøekladu sí»ových adres - NAT. Pro pøipojení monitorovacích,
pøípadnì jiných klientù, je potøeba na lascaux nastavit forwarding jednotlivých
TCP portù na poèítaèe ve vnitøní síti, a v konfiguraèních souborech kamer je
potøeba zmìnit název poèítaèe}.
