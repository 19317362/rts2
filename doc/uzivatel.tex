\chapter{U¾ivatelský manuál}

\section{Kompilace}

Makefile jsou vytváøeny standardními balíky Automake a Autoconfig (pokud mo¾no
verze rovné nebo vy¹¹í ne¾ 2.50). 

Chceme-li Makefile znovu vytvoøit, staèí v adresáøi rts2 zadat pøíkazy {\bf
aclocal}, {\bf autoconf} a {\bf automake}. Tyto dva pøíkazy je bezpodmíneènì
nutné zadat v kódu, sta¾eném z CVSka.

Po sta¾ení zdrojového kódu staèí v pøíkazové
øádce zadat:

{\bf ./configure}

Konfiguraèní skript provìøí cílový systém. Jeho provádìní se ukonèí chybovou
hlá¹kou popisující chybu v pøípadì, ¾e systém neobsahuje v¹echny potøebné
knihovny.

Dále je tøeba pøelo¾it binární kód a nainstalovat vytvoøená data.
To se dìje pomocí

{\bf make}

{\bf make install}

Pro make install je vhodné mít rootovské oprávnìní.

\section{Spou¹tìní, zastavování}

Pro spu¹tìní serverù slou¾í inicializaèní skript rts2, ulo¾ený v adresáøi
{\it /etc/init.d}.  Konfigurace systému se dìje pomocí souborù umístìných v adresáøi
{\it /etc/rts2}.

Servery je mo¾né pou¹tìt i manuálnì. Ka¾dý server spu¹tìný s parametrem -h
vypí¹e krátkou nápovìdu.

V¹echny binární soubory jsou obvykle instalovány do adresáøe {\it /usr/local/bin}.
Toto umístnìní lze zmìnit nastavením argumentu prefix pøi volání configure
skriptu.

Pro pøíklad lze uvést procesy, které bì¾í u dalekohledu BART:

\begin{tabular}{l|p{10cm}}
{\bf jméno poèítaèe} & popis \\
\hline
{\bf lascaux}	& rts2-centrald (centrální server), rts2-planc (dlouhodobé pozorování), rts2-grbc (reakce na gama záblesky), rts2-mon \\
{\bf c0}	& rts2-camd se jménem C0 (obsluha kamery C0, ¹irokoúhlé kamery pøichycené na dalekohledu, tato kamera slou¾í pro zpìtnou korekci chyb montá¾e), rts2-teld se jménem T0 (obsluha dalekohledu T0) \\
{\bf c1}	& rts2-camd se jménem C1 (obsluha kamery C1, ¹irokoúhlé kamery povì¹ené na dalekohledu) \\
{\bf cnf1}	& rts2-camd se jménem CNF1 (obsluha kamery CNF1 - kamera na hlavním dalekohledu)
\end{tabular}

\section{Monitoring}

Monitorovací klient zobrazuje stav v¹ech zaøízení pøipojených na centrální
server.

Pomocí monitorovacího klienta lze zadávat pøíkazy pro provádìní funkcí na
zaøízení. Pøíkazy pro centrální server lze psát pøímo, pøíkazy pro zaøízení
se pí¹í ve tvaru {\it [jméno zaøízení].[pøíkaz] \{parametry\}}. Jméno zaøízení
lze zjistit z panelu s informacemi o zaøízení. Text pøíkazu se zobrazuje v
horní øádce. Pokud nezadáme jméno zaøízení, pøíkaz je odeslán na centrální server.

K dispozici jsou tyto klávesové zkratky:

\begin{description}
\item[F2] pøevede server do stavu off, ekvivalent pøíkazu {\it off}
\item[F3] pøevede server do stavu standby, ekvivalent pøíkazu {\it standby}
\item[F4] pøevede server do stavu on, ekvivalent pøíkazu {\it on}
\item[F5] zaktualizuje údaje o v¹ech pøipojených zaøízeních, pøekreslí obrazovku 
\item[F10] ukonèí monitorovací program
\end{description}

Monitorovací klient zobrazuje v pravém dolním rohu aktuální komunikaci mezi
monitorovacím klientem a jednotlivými servery.

\begin{figure}[ht]
\begin{center}
\rotatebox{-90}{
\scalebox{0.50}{\includegraphics{nmonitor.pdf}}}
\end{center}
\caption{\label{fig:nmonitor}Obrazovka nmonitoru}
\end{figure}

\section{Pøístup k databázi}

Pøístup k databázi je mo¾ný pøes WWW rozhraní. Snímky z dalekohledu BART jsou
takto dostupné na {\it http://lascaux.asu.cas.cz/bartdb}.

Pokud chceme v databázi mìnit údaje, pøípadnì stahovat existující snímky, je
tøeba se nejdøíve pøihlásit. Pro pøihlá¹ení je tøeba znát své pøihla¹ovací
jméno a heslo. Pøihlá¹ení je mo¾né pomocí formuláøe \ref{fig:login}. 

\fitsdb{login}{Formuláø pro pøihlá¹ení}

Obrázek \ref{fig:targets_list} ukazuje, jak vypadá seznam napozorovaných cílù.

\fitsdb{targets_list}{Stránka s výpisem cílù pozorování}

Po vybrání odkazu na konkrétní cíl se objeví formuláø \ref{fig:target_form} s
rozpisem poøízených snímkù pro konkrétní cíl pozorování.

\fitsdb{target_form}{Stránka s formuláøem pro konkrétní cíl pozorování}

Stránka \ref{fig:observations_list} pak ukazuje výpis poøízených pozorování.

\fitsdb{observations_list}{Stránka s výpisem pozorování}

Pokud jsme pøihlá¹eni, je mo¾né pomocí zatrhávacích tlaèítek urèovat, které
snímky chceme stáhnout. Pøes tlaèítko download je pak mo¾né získat snímky ve
formì tgz balíku.

\fitsdb{images_list}{Obrazovka s výpisem snímkù}
